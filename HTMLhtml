<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queen Elizabeth II - A Journey in Coins</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            overflow-x: hidden;
            background: #000;
        }

        /* ========== BOOK INTRO ANIMATION ========== */
        
        /* Intro Section with Book */
        .intro-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            perspective: 2500px;
            opacity: 1;
        }

        .intro-section.fade-out {
            animation: fadeOutIntro 1s ease forwards;
        }

        @keyframes fadeOutIntro {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        .intro-section.hidden {
            display: none;
        }

        .book-wrapper {
            position: relative;
            opacity: 0;
            animation: fadeInBook 2s ease forwards;
            animation-delay: 0.5s;
        }

        @keyframes fadeInBook {
            to {
                opacity: 1;
            }
        }

        /* Book Container - fixed size */
        .book-container {
            position: relative;
            width: 600px;
            height: 750px;
            transform-style: preserve-3d;
        }

        /* Left page (hidden initially, shows after opening) */
        .page-left {
            position: absolute;
            width: 600px;
            height: 750px;
            left: 0;
            top: 0;
            background: #ffffff;
            border-radius: 8px 0 0 8px;
            box-shadow: -20px 0 40px rgba(0, 0, 0, 0.3);
            padding: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform-origin: right center;
        }

        .book-container.opening .page-left {
            animation: showLeftPage 0.5s ease forwards;
            animation-delay: 2s;
        }

        .book-container.opened .page-left {
            opacity: 1;
        }

        @keyframes showLeftPage {
            to {
                opacity: 1;
            }
        }

        .page-left::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: linear-gradient(to right, 
                rgba(0,0,0,0.05) 0%, 
                rgba(0,0,0,0.02) 5%,
                transparent 10%);
            border-radius: 8px 0 0 8px;
            pointer-events: none;
        }

        /* Right page with cover (flips open) */
        .page-right-container {
            position: absolute;
            width: 600px;
            height: 750px;
            right: 0;
            top: 0;
            transform-style: preserve-3d;
            transform-origin: left center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .page-right-container:hover:not(.flipping) {
            transform: scale(1.02);
        }

        .book-container.opening .page-right-container {
            animation: flipCoverOpen 2.5s cubic-bezier(0.645, 0.045, 0.355, 1) forwards;
            cursor: default;
        }

        .book-container.opened .page-right-container {
            transform: rotateY(-180deg);
        }

        @keyframes flipCoverOpen {
            0% {
                transform: rotateY(0deg);
            }
            100% {
                transform: rotateY(-180deg);
            }
        }

        /* Cover front (what you see initially) */
        .cover-front {
            position: absolute;
            width: 600px;
            height: 750px;
            background: linear-gradient(145deg, #3d4b6e 0%, #2a3550 100%);
            border-radius: 0 8px 8px 0;
            box-shadow: 
                20px 0 50px rgba(0, 0, 0, 0.6),
                0 30px 80px rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 50px;
            backface-visibility: hidden;
            transform: rotateY(0deg);
        }

        .cover-front::after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 12px;
            height: 100%;
            background: linear-gradient(to right, rgba(0,0,0,0.4), transparent);
        }

        /* Cover back (inside of cover - shows when flipped) */
        .cover-back {
            position: absolute;
            width: 600px;
            height: 750px;
            background: linear-gradient(145deg, #f8f8f8 0%, #ffffff 100%);
            border-radius: 8px 0 0 8px;
            transform: rotateY(180deg);
            backface-visibility: hidden;
            box-shadow: 
                -20px 0 40px rgba(0, 0, 0, 0.2),
                inset 10px 0 20px rgba(0, 0, 0, 0.03);
            padding: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Gray vertical line removed for cleaner look */
        /* .cover-back::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            width: 12px;
            height: 100%;
            background: linear-gradient(to left, rgba(0,0,0,0.15), transparent);
        } */

        /* Page images */
        .page-image-container {
            width: 100%;
            max-width: 100%;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        }

        .page-image-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Cover content */
        .queen-portrait {
            width: 360px;
            height: 380px;
            margin-bottom: 25px;
            margin-top: 10px;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .queen-portrait img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cover-title {
            font-size: 48px;
            font-weight: 400;
            color: #ffffff;
            text-align: center;
            letter-spacing: 2px;
            margin-bottom: 10px;
            font-style: italic;
            font-family: 'Playfair Display', Georgia, serif;
        }

        .cover-main-title {
            font-size: 80px;
            font-weight: 700;
            color: #ffffff;
            text-align: center;
            line-height: 1;
            margin-bottom: 30px;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            font-family: 'Playfair Display', Georgia, serif;
            letter-spacing: 2px;
        }

        .cover-subtitle {
            font-size: 28px;
            font-weight: 400;
            color: #ffffff;
            text-align: center;
            font-style: italic;
            margin-bottom: 20px;
            font-family: 'Playfair Display', Georgia, serif;
            letter-spacing: 1px;
        }

        .cover-author {
            font-size: 18px;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            font-style: italic;
            margin-top: 10px;
            font-family: 'Playfair Display', Georgia, serif;
            letter-spacing: 0.5px;
        }

        /* Spine shadow in center */
        .spine-shadow {
            position: absolute;
            width: 3px;
            height: 100%;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.3);
            opacity: 0;
            z-index: 10;
            pointer-events: none;
        }

        .book-container.opening .spine-shadow {
            animation: showSpine 0.5s ease forwards;
            animation-delay: 2s;
        }

        .book-container.opened .spine-shadow {
            opacity: 1;
        }

        @keyframes showSpine {
            to {
                opacity: 1;
            }
        }

        /* Click Hint */
        .click-hint {
            position: absolute;
            bottom: -80px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            letter-spacing: 4px;
            text-transform: uppercase;
            opacity: 0;
            animation: fadeInHint 1.5s ease forwards;
            animation-delay: 3s;
            font-style: italic;
            white-space: nowrap;
        }

        .book-container.opening .click-hint {
            display: none;
        }

        @keyframes fadeInHint {
            to {
                opacity: 1;
            }
        }

        .click-hint::before {
            content: '✨ ';
        }

        .click-hint::after {
            content: ' ✨';
        }

        /* ========== MAIN WEBSITE CONTENT ========== */

        /* Main Content */
        .main-content {
            opacity: 0;
            transition: opacity 1s ease;
        }

        .main-content.visible {
            opacity: 1;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 30px 40px;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(-100%);
        }

        .header.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .header.light {
            color: #1a1a1a;
        }

        .header.dark {
            color: white;
        }

        .logo {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: 3px;
        }

        .order-btn {
            padding: 12px 28px;
            border-radius: 25px;
            border: none;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .header.dark .order-btn {
            background: rgba(255, 255, 255, 0.15);
            color: white;
        }

        .header.light .order-btn {
            background: rgba(0, 0, 0, 0.08);
            color: #1a1a1a;
        }

        .order-btn:hover {
            transform: scale(1.05);
        }

        /* Section base */
        section {
            min-height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Section 1 - Title Page */
        .section-1 {
            background: #ffffff;
            color: #1a1a1a;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 40px;
        }

        .title-image-container {
            width: 100%;
            max-width: 900px;
            margin-bottom: 50px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .title-image-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        .title-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .title-overlay-main {
            font-size: 36px;
            font-weight: 700;
            color: #ffffff;
            text-align: center;
            letter-spacing: 8px;
            position: absolute;
            top: 42%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            font-family: 'Playfair Display', Georgia, serif;
            white-space: nowrap;
        }

        .title-overlay-subtitle {
            font-size: 16px;
            font-weight: 400;
            color: #ffffff;
            text-align: center;
            font-style: italic;
            letter-spacing: 1px;
            line-height: 1.6;
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            font-family: 'Playfair Display', Georgia, serif;
            max-width: 90%;
        }

        .coin-button-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .coin-button {
            width: 120px;
            height: 120px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            background-image: url('4.png');
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .coin-button:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
        }

        .coin-button:active {
            transform: scale(1.05) translateY(-2px);
        }

        .click-text {
            font-size: 16px;
            font-style: italic;
            color: #666;
            letter-spacing: 1px;
            font-family: 'Playfair Display', Georgia, serif;
        }

        /* Section 3 - Yellow Circle */
        .section-3 {
            background: white;
            position: relative;
            overflow: hidden;
        }

        .yellow-circle {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #e8e8e8, #c0c0c0 50%, #a8a8a8);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            opacity: 0;
            box-shadow: inset 0 2px 10px rgba(255, 255, 255, 0.5);
        }

        .yellow-circle.expand {
            animation: expandCircle 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes expandCircle {
            0% {
                width: 60px;
                height: 60px;
                opacity: 1;
            }
            100% {
                width: 300vmax;
                height: 300vmax;
                opacity: 1;
            }
        }

        .yellow-circle.shrink {
            animation: shrinkAndDrop 1.5s cubic-bezier(0.6, 0, 0.4, 1) forwards;
            animation-delay: 0.5s;
        }

        @keyframes shrinkAndDrop {
            0% {
                width: 300vmax;
                height: 300vmax;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }
            50% {
                width: 60px;
                height: 60px;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }
            100% {
                width: 60px;
                height: 60px;
                top: calc(100vh + 120px);
                left: 70%;
                transform: translate(-50%, 0);
            }
        }

        .section-3-content {
            position: relative;
            z-index: 2;
            text-align: center;
            max-width: 750px;
            padding: 80px 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 50px;
        }

        .section-3-text {
            font-size: 20px;
            line-height: 1.8;
            color: #1a1a1a;
            text-align: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            max-width: 700px;
        }

        .section-3-image-container {
            width: 100%;
            max-width: 450px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .section-3-image-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Section 4 - Timeline */
        .section-4 {
            background: #f5f5f5;
            transition: background 0.6s ease;
            position: relative;
        }

        .section-4::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0;
            transition: opacity 0.6s ease;
            pointer-events: none;
        }

        .section-4.has-background::before {
            opacity: 0.5;
        }

        .section-4.dark {
            color: white;
        }

        .timeline-container {
            display: flex;
            width: 100%;
            max-width: 1400px;
            padding: 80px 40px;
        }

        .timeline-left {
            flex: 1;
            position: relative;
            min-height: 600px;
        }

        .timeline-image {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 20px;
            opacity: 0;
            transition: opacity 0.6s ease;
        }

        .timeline-image.active {
            opacity: 1;
        }

        .timeline-right {
            flex: 1;
            padding-left: 80px;
            display: flex;
            flex-direction: column;
        }

        .timeline-header {
            font-size: 14px;
            letter-spacing: 3px;
            text-transform: uppercase;
            opacity: 0.6;
            margin-bottom: 20px;
        }

        .timeline-main-title {
            font-size: 48px;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 40px;
        }

        .timeline-dot-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .time-dot {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #e8e8e8, #c0c0c0 50%, #a8a8a8);
            cursor: pointer;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 2px 10px rgba(255, 255, 255, 0.5), 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .time-dot:hover {
            transform: scale(1.1);
        }

        .time-dot.white {
            background: white;
        }

        .time-text {
            font-size: 24px;
            font-weight: 600;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-title {
            font-size: 36px;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 24px;
        }

        .timeline-description {
            font-size: 18px;
            line-height: 1.7;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        /* Special styling for 1953 timeline */
        .timeline-special-header {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        .timeline-special-subtitle {
            font-size: 26px;
            font-style: italic;
            margin-bottom: 30px;
            font-family: 'Playfair Display', Georgia, serif;
        }

        .timeline-special-text {
            font-size: 17px;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .timeline-coins-container {
            display: flex;
            gap: 20px;
            margin-top: 30px;
            align-items: center;
        }

        .timeline-coin-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .timeline-coin-caption {
            font-size: 13px;
            line-height: 1.6;
            opacity: 0.8;
            margin-top: 20px;
            font-style: italic;
        }

        .timeline-cta {
            margin-top: 40px;
        }

        .cta-button {
            padding: 16px 40px;
            background: white;
            color: #1a1a1a;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .cta-button:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <!-- ========== BOOK INTRO SECTION ========== -->
    <div class="intro-section" id="introSection">
        <div class="book-wrapper">
            <div class="book-container" id="bookContainer">
                <!-- Left page (hidden initially, shows after opening) -->
                <div class="page-left">
                    <div class="page-image-container">
                        <img src="2.png" alt="Queen Elizabeth II Coronation">
                    </div>
                </div>

                <!-- Center spine shadow -->
                <div class="spine-shadow"></div>

                <!-- Right page with cover (flips open) -->
                <div class="page-right-container" id="pageRightContainer">
                    <!-- Front cover -->
                    <div class="cover-front">
                        <div class="cover-title">Queen</div>
                        <div class="cover-main-title">Elizabeth<br>II</div>
                        <div class="queen-portrait">
                            <img src="1.png" alt="Queen Elizabeth II">
                        </div>
                        <div class="cover-subtitle">A Journey in Coins</div>
                        <div class="cover-author">Jingwen Han, Yamin Cai</div>
                    </div>
                    <!-- Back of cover (inside page) -->
                    <div class="cover-back">
                        <div class="page-image-container">
                            <img src="3.png" alt="Queen Elizabeth II with Attendants">
                        </div>
                    </div>
                </div>
            </div>

            <div class="click-hint">Click to Open the Book</div>
        </div>
    </div>

    <!-- ========== MAIN WEBSITE CONTENT ========== -->
    <div class="main-content" id="mainContent">
        <!-- Header -->
        <header class="header light" id="header">
            <div class="logo">ELIZABETH II</div>
        </header>

        <!-- Section 1: Title Page -->
        <section class="section-1" id="section1">
            <div class="title-image-container">
                <img src="5.png" alt="From Metal to Memory - Queen Elizabeth II">
                <div class="title-overlay">
                    <div class="title-overlay-main">FROM METAL TO MEMORY</div>
                    <div class="title-overlay-subtitle">Four portraits, seventy years, one legacy engraved in Canada's coins.</div>
                </div>
            </div>
            <div class="coin-button-container">
                <button class="coin-button" id="coinButton" aria-label="Enter the story"></button>
                <div class="click-text">CLICK HERE</div>
            </div>
        </section>

        <!-- Section 3: Yellow Circle -->
        <section class="section-3" id="section3">
            <div class="yellow-circle" id="yellowCircle"></div>
            <div class="section-3-content">
                <p class="section-3-text">
                    In 1953, a young queen's face appeared on Canadian coins for the first time, Not on stamps, not in paintings — but in the hands of millions. These coins carried her story into everyday life. These becoming one of the most touched images in the nation's history. Seventy years later, both the Queen and the coins that bore her image would fade together into memory.
                </p>
                <div class="section-3-image-container">
                    <img src="6.png" alt="Queen Elizabeth II Portrait 1953">
                </div>
            </div>
        </section>

        <!-- Section 4: Timeline -->
        <section class="section-4" id="timelineSection">
            <div class="timeline-container">
                <div class="timeline-left" id="timelineImages">
                    <!-- Images will be added dynamically -->
                </div>
                <div class="timeline-right">
                    <div class="timeline-header">Four Portraits Across Time</div>
                    <h2 class="timeline-main-title">The Evolution<br>of a Queen</h2>
                    
                    <div class="timeline-dot-container">
                        <div class="time-dot" id="timeDot">
                            <span style="font-size: 0;"></span>
                        </div>
                        <span class="time-text" id="timeText">1953</span>
                    </div>

                    <div class="timeline-content" id="timelineContent">
                        <!-- Content will be updated dynamically -->
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // ========== BOOK ANIMATION SCRIPT ==========
        const bookContainer = document.getElementById('bookContainer');
        const pageRightContainer = document.getElementById('pageRightContainer');
        const introSection = document.getElementById('introSection');
        const mainContent = document.getElementById('mainContent');
        let bookState = 'closed';

        // Click on cover to open book
        pageRightContainer.addEventListener('click', () => {
            if (bookState === 'closed') {
                bookState = 'opening';
                bookContainer.classList.add('opening');
                
                // After flip animation completes (2.5s), keep book open for 1 second, then fade to main site
                setTimeout(() => {
                    bookContainer.classList.remove('opening');
                    bookContainer.classList.add('opened');
                    bookState = 'opened';
                    
                    // Start fade out after 1 second
                    setTimeout(() => {
                        introSection.classList.add('fade-out');
                        mainContent.classList.add('visible');
                        
                        // Remove intro section completely after fade completes
                        setTimeout(() => {
                            introSection.classList.add('hidden');
                            document.body.style.overflow = 'auto';
                        }, 1000);
                    }, 1000);
                }, 2500);
            }
        });

        // Prevent scrolling during intro
        document.body.style.overflow = 'hidden';

        // ========== MAIN WEBSITE SCRIPTS ==========
        
        // Coin button - scroll to Section 3
        const coinButton = document.getElementById('coinButton');
        if (coinButton) {
            coinButton.addEventListener('click', () => {
                const section3 = document.querySelector('.section-3');
                if (section3) {
                    section3.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        }
        
        // Timeline data
        const timelineData = [
            {
                time: '1953-1964',
                title: 'YOUTH & CORONATION',
                subtitle: 'A New Reign Begins',
                description: 'At 25, Queen Elizabeth II\'s youthful portrait appeared on Canadian coins, wearing a classical laurel wreath is symbolized hope and optimism.',
                description2: 'During the post-war boom, these coins circulated everywhere, people could buy coffee, bus tickets, and newspapers - making her face the most touched image in Canada.',
                description3: 'Metal was memory, and Canadians carried the Queen in their pockets every single day.',
                coinCaption: '25 Cents Elizabeth II (1953-1964) Canada Silver Coin.<br>*The back of the coin featured Canada\'s caribou (a type of deer), which has been used since 1937',
                bgColor: '#2a2520',
                bgImage: '9.png',
                dotClass: 'white',
                showCTA: false,
                showCoins: true,
                coinImages: ['8.png', '7.png'],
                images: ['10.png'],
                isSpecial: true
            },
            {
                time: '1965',
                title: 'Mature Majesty',
                description: 'The second portrait captured the Queen at 39, reflecting her growing confidence and experience. This image appeared on coins during a transformative period of Canadian history.',
                description2: null,
                bgColor: '#f5f5f5',
                dotClass: '',
                showCTA: false,
                images: ['#d5d5d5', '#e5e5e5']
            },
            {
                time: '1990',
                title: 'Timeless Grace',
                description: 'The third portrait depicted the Queen wearing the Diamond Diadem, showcasing the dignity and grace of a monarch who had served for nearly four decades.',
                description2: null,
                bgColor: '#f5f5f5',
                dotClass: '',
                showCTA: false,
                images: ['#c8c8c8', '#d0d0d0']
            },
            {
                time: '2003',
                title: 'A Lasting Legacy',
                description: 'The final portrait on Canadian coins showed Queen Elizabeth II in her later years, celebrating her Golden Jubilee. This image would grace coins until her passing in 2022.',
                description2: 'Together, these four portraits chronicle seventy years of dedicated service, making Queen Elizabeth II an enduring symbol of stability and continuity.',
                bgColor: '#1a1a1a',
                dotClass: 'white',
                showCTA: true,
                images: ['#2a2a2a']
            }
        ];

        let currentIndex = 0;
        let hasExpandedCircle = false;
        let hasDroppedCircle = false;

        // Initialize timeline images
        function initializeImages() {
            const container = document.getElementById('timelineImages');
            timelineData.forEach((data, index) => {
                data.images.forEach((imageSource, imgIndex) => {
                    const div = document.createElement('div');
                    div.className = 'timeline-image';
                    
                    // Check if it's a URL or a color
                    if (imageSource.startsWith('#')) {
                        div.style.background = imageSource;
                    } else {
                        div.style.backgroundImage = `url('${imageSource}')`;
                        div.style.backgroundSize = 'cover';
                        div.style.backgroundPosition = 'center';
                    }
                    
                    div.dataset.index = index;
                    div.dataset.imgIndex = imgIndex;
                    container.appendChild(div);
                });
            });
            updateImages();
        }

        // Update timeline images
        function updateImages() {
            const images = document.querySelectorAll('.timeline-image');
            images.forEach((img) => {
                const index = parseInt(img.dataset.index);
                img.classList.toggle('active', index === currentIndex);
            });
        }

        // Header color change on scroll
        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            const scrollPos = window.scrollY;
            const section1 = document.querySelector('.section-1');
            const section3 = document.querySelector('.section-3');
            const section4 = document.getElementById('timelineSection');
            
            const section1Bottom = section1.offsetTop + section1.offsetHeight;
            const section3Top = section3.offsetTop;
            const section3Bottom = section3Top + section3.offsetHeight;
            const section4Top = section4.offsetTop;

            // Show/hide header based on scroll position
            // Hide header when on title page (Section 1)
            if (scrollPos < section1Bottom - 100) {
                header.classList.remove('visible');
            } else {
                header.classList.add('visible');
            }

            // Header color based on section
            // Section 1 (white) and Section 3 (white) use light header (dark text)
            // Section 4 timeline changes based on time
            if (scrollPos < section1Bottom || (scrollPos >= section3Top - 100 && scrollPos < section4Top - 100)) {
                header.classList.remove('dark');
                header.classList.add('light');
            } else {
                header.classList.remove('light');
                header.classList.add('dark');
            }

            // Yellow circle animations
            const yellowCircle = document.getElementById('yellowCircle');
            const expandTrigger = section3Top - window.innerHeight / 2;
            const shrinkTrigger = section3Bottom - window.innerHeight / 2;
            
            if (scrollPos >= expandTrigger && !hasExpandedCircle) {
                yellowCircle.classList.add('expand');
                hasExpandedCircle = true;
            }
            
            if (scrollPos >= shrinkTrigger && !hasDroppedCircle) {
                yellowCircle.classList.add('shrink');
                hasDroppedCircle = true;
            }
        });

        // Update timeline content
        function updateTimeline() {
            const data = timelineData[currentIndex];
            
            // Update dot
            const dot = document.getElementById('timeDot');
            dot.className = 'time-dot ' + data.dotClass;
            
            // Update time
            document.getElementById('timeText').textContent = data.time;
            
            // Update background
            const section = document.getElementById('timelineSection');
            section.style.background = data.bgColor;
            
            // Update background image
            if (data.bgImage) {
                section.style.setProperty('--bg-image', `url('${data.bgImage}')`);
                section.classList.add('has-background');
                const beforeElement = section.querySelector('::before') || section;
                section.style.setProperty('background-image', 'none');
                const style = document.createElement('style');
                style.textContent = `#timelineSection::before { background-image: url('${data.bgImage}') !important; }`;
                document.head.appendChild(style);
            } else {
                section.classList.remove('has-background');
            }
            
            // Update dark/light mode
            if (data.bgColor === '#1a1a1a' || data.bgColor === '#2a2520') {
                section.classList.add('dark');
            } else {
                section.classList.remove('dark');
            }

            // Update content - check if special layout
            let html = '';
            
            if (data.isSpecial) {
                // Special layout for 1953
                html = `
                    <h3 class="timeline-special-header">${data.title}</h3>
                    <p class="timeline-special-subtitle">${data.subtitle}</p>
                    <p class="timeline-special-text">${data.description}</p>
                `;
                
                if (data.description2) {
                    html += `<p class="timeline-special-text">${data.description2}</p>`;
                }
                
                if (data.description3) {
                    html += `<p class="timeline-special-text">${data.description3}</p>`;
                }
                
                if (data.showCoins && data.coinImages) {
                    html += `<div class="timeline-coins-container">`;
                    data.coinImages.forEach(img => {
                        html += `<img src="${img}" alt="Coin" class="timeline-coin-image">`;
                    });
                    html += `</div>`;
                }
                
                if (data.coinCaption) {
                    html += `<p class="timeline-coin-caption">${data.coinCaption}</p>`;
                }
            } else {
                // Normal layout
                html = `
                    <h3 class="timeline-title">${data.title}</h3>
                    <p class="timeline-description">${data.description}</p>
                `;

                if (data.description2) {
                    html += `<p class="timeline-description">${data.description2}</p>`;
                }

                if (data.showCTA) {
                    html += `
                        <div class="timeline-cta">
                            <button class="cta-button">Explore the Collection</button>
                        </div>
                    `;
                }
            }

            document.getElementById('timelineContent').innerHTML = html;
            
            // Update images
            updateImages();
        }

        // Click on dot to advance
        document.getElementById('timeDot').addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % timelineData.length;
            updateTimeline();
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            const section = document.getElementById('timelineSection');
            const rect = section.getBoundingClientRect();
            
            if (rect.top < window.innerHeight && rect.bottom > 0) {
                if (e.key === 'ArrowDown' && currentIndex < timelineData.length - 1) {
                    e.preventDefault();
                    currentIndex++;
                    updateTimeline();
                } else if (e.key === 'ArrowUp' && currentIndex > 0) {
                    e.preventDefault();
                    currentIndex--;
                    updateTimeline();
                }
            }
        });

        // Wheel event on timeline
        document.getElementById('timelineSection').addEventListener('wheel', (e) => {
            e.preventDefault();
            if (e.deltaY > 0 && currentIndex < timelineData.length - 1) {
                currentIndex++;
                updateTimeline();
            } else if (e.deltaY < 0 && currentIndex > 0) {
                currentIndex--;
                updateTimeline();
            }
        }, { passive: false });

        // Initialize
        initializeImages();
        updateTimeline();
    </script>
</body>
</html>
